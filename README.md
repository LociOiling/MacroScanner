# MacroScanner
Scan a Foldit cookbook (all.macro) file and generate Lua code for GUI recipes.

MacroScanner is a Python program that reads a Foldit cookbook, which is stored in the file all.macro.

Cookbooks contain two types of recipes: GUI and Lua. 

GUI recipes are being discontinued in 2021.

MacroScanner generates the equivalent Lua code for each GUI recipe it finds. It saves each new recipe as a separate file in the current working directory. The saved recipes have the extension ".lua". 

MacroScanner lists the name and description of each recipe it finds. Version 1.0 does not do anything with existing Lua recipes.

MacroScanner can be used from the command line:

python MacroScanner.py [infile] [outfile] [--detail]

All arguments are optional. 

[infile] is the name of the macro file to scan. It defaults to "all.macro" in the current directory. Any file name can be used, "all.macro" is just the name Foldit uses.

[outfile] is the name of the output file. It defaults to stdout

[--detail] includes some additional comments in the generated Lua code, showing the GUI command and its arguments

MacroScanner was written and tested using Python 3.7.3, but it may be compatible with older versions of Python.

Some features of GUI recipes aren't included in Foldit's Lua interface. 

For example, there's an interactive "user pick" feature that allows selecting segments or bands for further processing. The selection can then be reused on a subsequent GUI command. For initial user picks and subsequent references to a user pick, Foldit generates code that references a list of segments or bands. It does not create the table containing the list, but marks it with a "TODO" comment. The generated recipe won't run without changes.

GUI recipes may also be incomplete, missing various arguments. MacroScanner again generates a "TODO" comment in these cases, and generates incomplete Lua code, which won't run. 

MacroScanner does not capture at least one the subtle features of GUI recipes. When using the "Local Wiggle" between frozen segments in a GUI recipe appears to wiggle all the adjacent unfrozen segments. For example, if segments 1 and 5 are frozen, GUI local wiggle of segment 2 also includes 3 and 4. The equivalent Lua generated by MacroScanner wiggles just segment 2. 


